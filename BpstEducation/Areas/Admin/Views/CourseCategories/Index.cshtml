@model IEnumerable<BpstEducation.Models.Course>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    int sno = 0;
}

<link href="~/admintemp/dist/plugins/datatables/css/datatables.bootstrap.min.css" rel="stylesheet" />
<div class="content">
    <div class="card">
        <div class="card-body">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h1 class="h3">Course List</h1>
                <a asp-action="Create" class="btn btn-primary btn-sm">Create New Course</a>
            </div>
            <div class="table-responsive">
                <table class="table table-hover" id="example1">
                    <thead class="thead-light">
                        <tr>
                            <th>S. No.</th>
                            <th> @Html.DisplayNameFor(model => model.Name) </th>
                            <th> @Html.DisplayNameFor(model => model.IntershipAvailable) </th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>

                        @foreach (var item in Model)
                        {
                            sno++;
                            <tr>
                                <td>@sno .</td>
                                <td> @Html.DisplayFor(modelItem => item.Name) </td>
                                <td>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" value="@item.IntershipAvailable" UniqueId="@item.UniqueId" onchange="UpdateAvailability(this)" id="IntershipAvailableChkBox_@item.UniqueId" />
                                        <label class="form-check-label" for="IntershipAvailableChkBox_@item.UniqueId">
                                            Allow Intership
                                        </label>
                                    </div> 
                                </td>
                                <td>
                                    <a href="/Admin/CourseCategories/Create/@item.UniqueId" title="Edit"><i class="fa fa-pencil text-secondary"></i></a> |
                                    <a href="/Admin/CourseCategories/Details/@item.UniqueId" title="Details"><i class="fa fa-eye text-success"></i></a> |
                                    <a href="/Admin/CourseCategories/Delete/@item.UniqueId" title="Delete"><i class="fa fa-trash text-danger"></i></a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
 
@section Scripts {
    <!-- DataTable -->
    <script src="~/admintemp/dist/plugins/datatables/jquery.datatables.min.js"></script>
    <script src="~/admintemp/dist/plugins/datatables/datatables.bootstrap.min.js"></script>
    <script>
                $(document).ready(function () {
                    $('#example1').DataTable();
                });

        function UpdateAvailability(thisObj)
                { 
                  $.ajax({
                    url: '/Admin/CourseCategories/UpdateCourseAvilibility', // Endpoint to fetch courses
                    type: 'POST',
                    dataType: "json", 
                    data:{
                        isChecked: $(thisObj).prop('checked'),
                        uniqueId:$(thisObj).attr('UniqueId')
                    },
                    success: function (data) { },
                    Error:function(data) {
                        $(thisObj).prop('checked', false);
                    },
                   });
                }
    </script>

}

